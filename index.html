<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Causal mediation analysis estimating interventional effects mapped to a target trial • medRCT</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Causal mediation analysis estimating interventional effects mapped to a target trial">
<meta name="description" content="Package for causal mediation analysis using interventional effects defined by mapping to a target trial assessing hypothetical mediator interventions. The package supports any number of potentially correlated mediators, including mediators that are not of primary interest but that are intermediate (exposure-induced) mediator-outcome confounders.">
<meta property="og:description" content="Package for causal mediation analysis using interventional effects defined by mapping to a target trial assessing hypothetical mediator interventions. The package supports any number of potentially correlated mediators, including mediators that are not of primary interest but that are intermediate (exposure-induced) mediator-outcome confounders.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">medRCT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/intro.html">Causal Mediation Analysis Estimating Interventional Effects Mapped to a Target Trial</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="medrct">medRCT<a class="anchor" aria-label="anchor" href="#medrct"></a>
</h1></div>
<!-- badges: start -->

<blockquote>
<p>Causal mediation analysis estimating interventional effects mapped to a target trial</p>
</blockquote>
<p>The R package <code>medRCT</code> for causal mediation analysis supports the estimation of interventional effects (VanderWeele, Vansteelandt, and Robins 2014), specifically interventional effects that are defined such that they map explicitly to a “target trial” (Hernán and Robins 2016), as recently proposed by Moreno-Betancur et al. (2021). In the target trial, the treatment strategies are specified to reflect hypothetical interventions targeting and thus shifting the joint distribution of the mediators. <code>medRCT</code> can accommodate any number of potentially correlated mediators, including mediators that are not of primary interest but that are intermediate (exposure-induced) mediator-outcome confounders.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <code>medRCT</code> package is not yet available on CRAN. You can install the latest stable version from <a href="https://github.com/T0ngChen/medRCT" class="external-link">GitHub</a> using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"T0ngChen/medRCT"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Using a simulated dataset based on a published case study from the Longitudinal Study of Australian Children (Goldfeld et al. 2023), we illustrate how to use <code>medRCT</code> to estimate the interventional effects that emulate a target trial. Specifically, we aim to estimate the difference in expected outcome (risk of child mental health problems) under exposure (low family socioeconomic position) with versus without a hypothetical intervention that individually shifts the distribution of each mediator (parental mental health and preschool attendance) to the levels in the unexposed (high family socioeconomic position), while accounting for baseline confounders, an intermediate (exposure-induced) mediator-outcome confounder (family stressful life events), and correlations amongst mediators.</p>
<p>We begin by loading the library and dataset, and defining the confounder vector.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the medRCT package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://t0ngchen.github.io/medRCT/">medRCT</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set a seed for reproducibility</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2025</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">LSACdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   child_sex child_atsi mat_cob mat_engl mat_age sep fam_stress parent_mh preschool_att child_mh</span></span>
<span><span class="co">#&gt; 1         0          1       0        0       1   0          0         0             1        0</span></span>
<span><span class="co">#&gt; 2        NA          0       0        0      NA   0         NA        NA             0        0</span></span>
<span><span class="co">#&gt; 3        NA          0       0        0      NA   0         NA        NA             0        1</span></span>
<span><span class="co">#&gt; 4        NA          0       0        0      NA   0         NA        NA             0        0</span></span>
<span><span class="co">#&gt; 5         1          0       0        0       1   1          0         0             0        1</span></span>
<span><span class="co">#&gt; 6         1          0       0        0       1   0          1         1             0        1</span></span>
<span><span class="co">#&gt;   child_SDQscore</span></span>
<span><span class="co">#&gt; 1       8.924660</span></span>
<span><span class="co">#&gt; 2       7.349826</span></span>
<span><span class="co">#&gt; 3      12.824643</span></span>
<span><span class="co">#&gt; 4       6.611369</span></span>
<span><span class="co">#&gt; 5      10.329341</span></span>
<span><span class="co">#&gt; 6      13.552515</span></span>
<span></span>
<span><span class="co"># Define confounders for the analysis</span></span>
<span><span class="va">confounders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"child_sex"</span>, <span class="st">"child_atsi"</span>, <span class="st">"mat_cob"</span>, <span class="st">"mat_engl"</span>, <span class="st">"mat_age"</span><span class="op">)</span></span></code></pre></div>
<p>Next we run the analyses, estimating interventional effects for a hypothetical intervention that shifts the distribution of each mediator individually. <strong>Note 1:</strong> the dataset has missing data. Incomplete records are by default deleted before the analysis. <strong>Note 2:</strong> It is recommended to perform the analysis with at least 200 Monte Carlo simulations by setting <code>mcsim = 200</code>. For illustration purposes, we use <code>mcsim = 50</code>, which takes approximately 90 seconds to run.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estimate interventional effects for a hypothetical intervention</span></span>
<span><span class="co"># that shifts the distribution of each mediator individually</span></span>
<span><span class="va">med_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/medRCT.html">medRCT</a></span><span class="op">(</span></span>
<span>  dat <span class="op">=</span> <span class="va">LSACdata</span>,                      </span>
<span>  exposure <span class="op">=</span> <span class="st">"sep"</span>,                    </span>
<span>  outcome <span class="op">=</span> <span class="st">"child_mh"</span>,                </span>
<span>  mediators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"parent_mh"</span>, <span class="st">"preschool_att"</span><span class="op">)</span>, </span>
<span>  intermediate_confs <span class="op">=</span> <span class="st">"fam_stress"</span>,  <span class="co"># intermediate confounders </span></span>
<span>  confounders <span class="op">=</span> <span class="va">confounders</span>,           </span>
<span>  bootstrap <span class="op">=</span> <span class="cn">TRUE</span>,                    </span>
<span>  intervention_type <span class="op">=</span> <span class="st">"shift_k"</span>,       </span>
<span>  mcsim <span class="op">=</span> <span class="fl">50</span>                          </span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Conducting complete case analysis, 2499 observations were excluded due to missing data.</span></span>
<span><span class="co">#&gt; Note: It is recommended to run analysis with no fewer than 200 Monte Carlo simulations.</span></span>
<span></span>
<span><span class="co"># Summarise the results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">med_res</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Estimated interventional indirect effect: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      Estimate Std. Error  CI Lower  CI Upper p-value</span></span>
<span><span class="co">#&gt; IIE_1 (p_trt - p_1)  0.011155   0.004181  0.002814  0.019203  0.0076</span></span>
<span><span class="co">#&gt; IIE_2 (p_trt - p_2) -0.000763   0.002501 -0.005443  0.004362  0.7604</span></span>
<span><span class="co">#&gt; TCE (p_trt - p_ctr)  0.128669   0.024554  0.082420  0.178668 1.6e-07</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Estimated interventional direct effect: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                     Estimate Std. Error CI Lower CI Upper p-value</span></span>
<span><span class="co">#&gt; IDE_1 (p_1 - p_ctr)   0.1175     0.0247   0.0712   0.1679 1.9e-06</span></span>
<span><span class="co">#&gt; IDE_2 (p_2 - p_ctr)   0.1294     0.0244   0.0833   0.1789 1.1e-07</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Estimated expected outcome in each trial arm:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Estimate Std. Error CI Lower CI Upper p-value</span></span>
<span><span class="co">#&gt; p_1     0.3302     0.0225   0.2872   0.3755  &lt;2e-16</span></span>
<span><span class="co">#&gt; p_2     0.3421     0.0221   0.2995   0.3862  &lt;2e-16</span></span>
<span><span class="co">#&gt; p_ctr   0.2127     0.0100   0.1922   0.2315  &lt;2e-16</span></span>
<span><span class="co">#&gt; p_trt   0.3413     0.0223   0.2987   0.3860  &lt;2e-16</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size: 2608 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Simulations: 50</span></span></code></pre></div>
<p>Based on the estimated interventional effect (IIE_1), a hypothetical intervention improving the mental health of parents of children from families with low socioeconomic position to the levels of those from families with high socioeconomic position could potentially prevent 1 per 100 cases of child mental health problems. Meanwhile, the effect of a hypothetical intervention on preschool attendance (IIE_2) is negligible.</p>
<p>For detailed guidance on using the package to handle more complex scenarios, please refer to the <a href="https://t0ngchen.github.io/medRCT/articles/intro.html">vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>For work involving the <code>medRCT</code> R package, please cite the following:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="sc">@</span>software{Chen2024medRCT,</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>   author <span class="ot">=</span> {Tong Chen and Margarita Moreno<span class="sc">-</span>Betancur and S. Ghazaleh Dashti},</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>   title <span class="ot">=</span> {medRCT<span class="sc">:</span> Causal mediation analysis estimating interventional effects mapped to a target trial},</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>   year  <span class="ot">=</span> {<span class="dv">2025</span>},</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>   url <span class="ot">=</span> {https<span class="sc">:</span><span class="er">//</span>t0ngchen.github.io<span class="sc">/</span>medRCT<span class="sc">/</span>},</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>   note <span class="ot">=</span> {R package version <span class="dv">0</span>.<span class="fl">1.0</span>}</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>   }</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="sc">@</span>article{Moreno2021Mediation,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>   author<span class="ot">=</span>{Margarita Moreno<span class="sc">-</span>Betancur and Paul Moran and Denise Becker and George C Patton and John B Carlin},</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>   title<span class="ot">=</span>{Mediation effects that emulate a target randomised trial<span class="sc">:</span> Simulation<span class="sc">-</span>based evaluation of ill<span class="sc">-</span>defined interventions on multiple mediators},</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>   journal<span class="ot">=</span>{Statistical Methods <span class="cf">in</span> Medical Research},</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>   volume<span class="ot">=</span>{<span class="dv">30</span>},</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>   number<span class="ot">=</span>{<span class="dv">6</span>},</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>   pages<span class="ot">=</span>{<span class="dv">1395</span><span class="sc">--</span><span class="dv">1412</span>},</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>   year<span class="ot">=</span>{<span class="dv">2021</span>},</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>   URL<span class="ot">=</span>{https<span class="sc">:</span><span class="er">//</span>doi.org<span class="sc">/</span><span class="fl">10.1177</span><span class="sc">/</span><span class="dv">0962280221998409</span>},</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>   doi<span class="ot">=</span>{<span class="fl">10.1177</span><span class="sc">/</span><span class="dv">0962280221998409</span>},</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>   publisher<span class="ot">=</span>{SAGE Publications Ltd}</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>   }    </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Goldfeld2023" class="csl-entry">
Goldfeld, Sharon, Margarita Moreno-Betancur, Sarah Gray, Shuaijun Guo, Marnie Downes, Elodie O’Connor, Francisco Azpitarte, et al. 2023. “Addressing Child Mental Health Inequities Through Parental Mental Health and Preschool Attendance.” <em>Pediatrics</em> 151 (5): e2022057101. <a href="https://doi.org/10.1542/peds.2022-057101" class="external-link uri">https://doi.org/10.1542/peds.2022-057101</a>.
</div>
<div id="ref-hernan2016using" class="csl-entry">
Hernán, Miguel A, and James M Robins. 2016. “Using Big Data to Emulate a Target Trial When a Randomized Trial Is Not Available.” <em>American Journal of Epidemiology</em> 183 (8): 758–64. <a href="https://doi.org/10.1093/aje/kwv254" class="external-link uri">https://doi.org/10.1093/aje/kwv254</a>.
</div>
<div id="ref-Moreno2021Mediation" class="csl-entry">
Moreno-Betancur, Margarita, Paul Moran, Denise Becker, George C Patton, and John B Carlin. 2021. “Mediation Effects That Emulate a Target Randomised Trial: Simulation-Based Evaluation of Ill-Defined Interventions on Multiple Mediators.” <em>Statistical Methods in Medical Research</em> 30 (6): 1395–1412. <a href="https://doi.org/10.1177/0962280221998409" class="external-link uri">https://doi.org/10.1177/0962280221998409</a>.
</div>
<div id="ref-vanderweele2014effect" class="csl-entry">
VanderWeele, Tyler J, Stijn Vansteelandt, and James M Robins. 2014. “Effect Decomposition in the Presence of an Exposure-Induced Mediator-Outcome Confounder.” <em>Epidemiology</em> 25 (2): 300–306. <a href="https://doi.org/10.1097/EDE.0000000000000034" class="external-link uri">https://doi.org/10.1097/EDE.0000000000000034</a>.
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing medRCT</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://tongchen.netlify.app/" class="external-link">Tong Chen</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2751-2412" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.mcri.edu.au/researcher-details/margarita-moreno-betancur" class="external-link">Margarita Moreno-Betancur</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.mcri.edu.au/researcher-details/ghazaleh-dashti" class="external-link">S. Ghazaleh Dashti</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://opensource.org/licenses/MIT" class="external-link"><img src="http://img.shields.io/badge/license-MIT-brightgreen.svg" alt="MIT license"></a></li>
<li><a href="https://github.com/T0ngChen/medRCT/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/T0ngChen/medRCT/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/T0ngChen/medRCT" class="external-link"><img src="https://codecov.io/gh/T0ngChen/medRCT/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://tongchen.netlify.app/" class="external-link">Tong Chen</a>, <a href="https://www.mcri.edu.au/researcher-details/margarita-moreno-betancur" class="external-link">Margarita Moreno-Betancur</a>, <a href="https://www.mcri.edu.au/researcher-details/ghazaleh-dashti" class="external-link">S. Ghazaleh Dashti</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
